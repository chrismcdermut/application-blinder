'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (manifest, _ref) {
  var buildPath = _ref.buildPath;
  var src = _ref.src;


  // TODO: unify with ./overrides.js
  var actions = [manifest.browser_action, manifest.page_action];
  var scripts = [];

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = actions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var action = _step.value;

      if (!action || !action.default_popup) {
        continue;
      }

      var script = (0, _html2.default)(action.default_popup, src, buildPath);

      scripts.push(script);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return { scripts: scripts };
};

var _html = require('./lib/html');

var _html2 = _interopRequireDefault(_html);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tYW5pZmVzdC9wcm9jZXNzb3IvYWN0aW9uLmpzIl0sIm5hbWVzIjpbIm1hbmlmZXN0IiwiYnVpbGRQYXRoIiwic3JjIiwiYWN0aW9ucyIsImJyb3dzZXJfYWN0aW9uIiwicGFnZV9hY3Rpb24iLCJzY3JpcHRzIiwiYWN0aW9uIiwiZGVmYXVsdF9wb3B1cCIsInNjcmlwdCIsInB1c2giXSwibWFwcGluZ3MiOiI7Ozs7OztrQkFFZSxVQUFTQSxRQUFULFFBQXFDO0FBQUEsTUFBakJDLFNBQWlCLFFBQWpCQSxTQUFpQjtBQUFBLE1BQU5DLEdBQU0sUUFBTkEsR0FBTTs7O0FBRWxEO0FBQ0EsTUFBTUMsVUFBVSxDQUFDSCxTQUFTSSxjQUFWLEVBQTBCSixTQUFTSyxXQUFuQyxDQUFoQjtBQUNBLE1BQU1DLFVBQVUsRUFBaEI7O0FBSmtEO0FBQUE7QUFBQTs7QUFBQTtBQU1sRCx5QkFBbUJILE9BQW5CLDhIQUE0QjtBQUFBLFVBQW5CSSxNQUFtQjs7QUFDMUIsVUFBRyxDQUFDQSxNQUFELElBQVcsQ0FBQ0EsT0FBT0MsYUFBdEIsRUFBcUM7QUFDbkM7QUFDRDs7QUFFRCxVQUFNQyxTQUFTLG9CQUFLRixPQUFPQyxhQUFaLEVBQTJCTixHQUEzQixFQUFnQ0QsU0FBaEMsQ0FBZjs7QUFFQUssY0FBUUksSUFBUixDQUFhRCxNQUFiO0FBQ0Q7QUFkaUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFnQmxELFNBQU8sRUFBQ0gsZ0JBQUQsRUFBUDtBQUNELEM7O0FBbkJEIiwiZmlsZSI6ImFjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodG1sIGZyb20gJy4vbGliL2h0bWwnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hbmlmZXN0LCB7YnVpbGRQYXRoLCBzcmN9KSB7XG5cbiAgLy8gVE9ETzogdW5pZnkgd2l0aCAuL292ZXJyaWRlcy5qc1xuICBjb25zdCBhY3Rpb25zID0gW21hbmlmZXN0LmJyb3dzZXJfYWN0aW9uLCBtYW5pZmVzdC5wYWdlX2FjdGlvbl1cbiAgY29uc3Qgc2NyaXB0cyA9IFtdXG5cbiAgZm9yIChsZXQgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICBpZighYWN0aW9uIHx8ICFhY3Rpb24uZGVmYXVsdF9wb3B1cCkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBjb25zdCBzY3JpcHQgPSBodG1sKGFjdGlvbi5kZWZhdWx0X3BvcHVwLCBzcmMsIGJ1aWxkUGF0aClcblxuICAgIHNjcmlwdHMucHVzaChzY3JpcHQpXG4gIH1cblxuICByZXR1cm4ge3NjcmlwdHN9XG59XG4iXX0=