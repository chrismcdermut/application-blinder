'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (manifest, _ref) {
  var buildPath = _ref.buildPath;
  var background = manifest.background;

  // Skip when there is no background property

  if (!background) return;

  var scripts = [];

  // Process background scripts
  if (background.scripts) {
    background.scripts.forEach(function (scriptPath) {
      (0, _script2.default)(scriptPath, buildPath);
      scripts.push(scriptPath);
    });
  }

  // Background page
  if (background.page) {
    scripts.push((0, _html2.default)(background.page, buildPath));
  }

  return { manifest: manifest, scripts: scripts };
};

var _script = require('./lib/script');

var _script2 = _interopRequireDefault(_script);

var _html = require('./lib/html');

var _html2 = _interopRequireDefault(_html);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tYW5pZmVzdC9wcm9jZXNzb3IvYmFja2dyb3VuZC5qcyJdLCJuYW1lcyI6WyJtYW5pZmVzdCIsImJ1aWxkUGF0aCIsImJhY2tncm91bmQiLCJzY3JpcHRzIiwiZm9yRWFjaCIsInNjcmlwdFBhdGgiLCJwdXNoIiwicGFnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2tCQUdlLFVBQVNBLFFBQVQsUUFBZ0M7QUFBQSxNQUFaQyxTQUFZLFFBQVpBLFNBQVk7QUFBQSxNQUN0Q0MsVUFEc0MsR0FDeEJGLFFBRHdCLENBQ3RDRSxVQURzQzs7QUFHN0M7O0FBQ0EsTUFBRyxDQUFDQSxVQUFKLEVBQ0U7O0FBRUYsTUFBTUMsVUFBVSxFQUFoQjs7QUFFQTtBQUNBLE1BQUdELFdBQVdDLE9BQWQsRUFBdUI7QUFDckJELGVBQVdDLE9BQVgsQ0FBbUJDLE9BQW5CLENBQTJCLFVBQUNDLFVBQUQsRUFBZ0I7QUFDekMsNEJBQU9BLFVBQVAsRUFBbUJKLFNBQW5CO0FBQ0FFLGNBQVFHLElBQVIsQ0FBYUQsVUFBYjtBQUNELEtBSEQ7QUFJRDs7QUFFRDtBQUNBLE1BQUdILFdBQVdLLElBQWQsRUFBb0I7QUFDbEJKLFlBQVFHLElBQVIsQ0FBYSxvQkFBS0osV0FBV0ssSUFBaEIsRUFBc0JOLFNBQXRCLENBQWI7QUFDRDs7QUFFRCxTQUFPLEVBQUNELGtCQUFELEVBQVdHLGdCQUFYLEVBQVA7QUFDRCxDOztBQTFCRDs7OztBQUNBIiwiZmlsZSI6ImJhY2tncm91bmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2NyaXB0IGZyb20gJy4vbGliL3NjcmlwdCdcbmltcG9ydCBodG1sIGZyb20gJy4vbGliL2h0bWwnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hbmlmZXN0LCB7YnVpbGRQYXRofSkge1xuICBjb25zdCB7YmFja2dyb3VuZH0gPSBtYW5pZmVzdFxuXG4gIC8vIFNraXAgd2hlbiB0aGVyZSBpcyBubyBiYWNrZ3JvdW5kIHByb3BlcnR5XG4gIGlmKCFiYWNrZ3JvdW5kKVxuICAgIHJldHVyblxuXG4gIGNvbnN0IHNjcmlwdHMgPSBbXVxuXG4gIC8vIFByb2Nlc3MgYmFja2dyb3VuZCBzY3JpcHRzXG4gIGlmKGJhY2tncm91bmQuc2NyaXB0cykge1xuICAgIGJhY2tncm91bmQuc2NyaXB0cy5mb3JFYWNoKChzY3JpcHRQYXRoKSA9PiB7XG4gICAgICBzY3JpcHQoc2NyaXB0UGF0aCwgYnVpbGRQYXRoKVxuICAgICAgc2NyaXB0cy5wdXNoKHNjcmlwdFBhdGgpXG4gICAgfSlcbiAgfVxuXG4gIC8vIEJhY2tncm91bmQgcGFnZVxuICBpZihiYWNrZ3JvdW5kLnBhZ2UpIHtcbiAgICBzY3JpcHRzLnB1c2goaHRtbChiYWNrZ3JvdW5kLnBhZ2UsIGJ1aWxkUGF0aCkpXG4gIH1cblxuICByZXR1cm4ge21hbmlmZXN0LCBzY3JpcHRzfVxufVxuIl19