import { polyfill, global } from "../../esdown-polyfill/Polyfill.js";
import runTests from "promises-aplus-tests";

delete global.Promise;

polyfill();

runTests({

    fulfilled(value) {

        return Promise.resolve(value);
    },

    rejected(value) {

        // A+ makes annoying assumptions about the error handling model
        var promise = Promise.reject(value);
        promise.then(null, x => x);
        return promise;
    },

    pending() {

        var tuple = {};

        tuple.promise = new Promise((resolve, reject) => {

            tuple.fulfill = resolve;
            tuple.reject = reject;
        });

        return tuple;
    }

}, err => {});
